
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Overview of the process &#8212; configpile</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Error handling in configpile" href="errors.html" />
    <link rel="prev" title="Concepts" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">configpile</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  General information
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Home page
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../tutorial/index.html">
   Tutorial
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/index.html">
     Index
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step1.html">
     Step 1: Simple calculator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step2.html">
     Step 2: Reuse defaults, short flags
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step3.html">
     Step 3: Two positional arguments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step4.html">
     Step 4: Many positional arguments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step5.html">
     Step 5: Additional features
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step6.html">
     Step 6: Final calculator script
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Concepts
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Overview of the process
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="errors.html">
     Error handling in
     <code class="docutils literal notranslate">
      <span class="pre">
       configpile
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="parsers.html">
     Parsers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="params.html">
     Params (parameters)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="validation.html">
     Parameter and configuration validation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="config.html">
     Configurations
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  API
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api.html">
   API
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.arg.html">
     arg
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.arg.Arg.html">
       Arg
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.arg.Expander.html">
       Expander
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.arg.Param.html">
       Param
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.collector.html">
     collector
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.collector.Collector.html">
       Collector
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.config.html">
     config
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.config.Config.html">
       Config
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.config.IniSection.html">
       IniSection
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.enums.html">
     enums
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.enums.Derived.html">
       Derived
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.enums.ForceCase.html">
       ForceCase
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.enums.Positional.html">
       Positional
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.enums.SpecialAction.html">
       SpecialAction
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.handlers.html">
     handlers
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLConfigParam.html">
       CLConfigParam
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLHandler.html">
       CLHandler
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLInserter.html">
       CLInserter
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLParam.html">
       CLParam
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLPos.html">
       CLPos
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLRootParam.html">
       CLRootParam
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLSpecialAction.html">
       CLSpecialAction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLStdHandler.html">
       CLStdHandler
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.KVConfigParam.html">
       KVConfigParam
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.KVHandler.html">
       KVHandler
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.KVParam.html">
       KVParam
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.KVRootParam.html">
       KVRootParam
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.parsers.html">
     parsers
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.path_parser.html">
       path_parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.int_parser.html">
       int_parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.str_parser.html">
       str_parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.stripped_str_parser.html">
       stripped_str_parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.float_parser.html">
       float_parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.ErrorMessageProvider.html">
       ErrorMessageProvider
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.Parser.html">
       Parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.Predicate.html">
       Predicate
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.processor.html">
     processor
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.processor.IniProcessor.html">
       IniProcessor
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.processor.Processor.html">
       Processor
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.processor.ProcessorFactory.html">
       ProcessorFactory
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.processor.State.html">
       State
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.userr.html">
     userr
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.collect.html">
       collect
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.collect_seq.html">
       collect_seq
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.flat_map.html">
       flat_map
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.in_context.html">
       in_context
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.map.html">
       map
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.wrap.html">
       wrap
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.Err.html">
       Err
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.Err1.html">
       Err1
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.ManyErr.html">
       ManyErr
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.util.html">
     util
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.assert_never.html">
       assert_never
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.dict_from_multiple_keys.html">
       dict_from_multiple_keys
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.filter_ordered_dict.html">
       filter_ordered_dict
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.filter_ordered_dict_by_value_type.html">
       filter_ordered_dict_by_value_type
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.filter_sequence_by_value_type.html">
       filter_sequence_by_value_type
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.filter_types.html">
       filter_types
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.filter_types_single.html">
       filter_types_single
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.ClassDoc.html">
       ClassDoc
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#demonstrating-the-process">
   Demonstrating the process
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parse-errors">
     Parse errors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#collection-errors">
     Collection errors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#instance-level-validation-errors">
     Instance-level validation errors
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Overview of the process</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#demonstrating-the-process">
   Demonstrating the process
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parse-errors">
     Parse errors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#collection-errors">
     Collection errors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#instance-level-validation-errors">
     Instance-level validation errors
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="overview-of-the-process">
<span id="concepts-overview"></span><h1>Overview of the process<a class="headerlink" href="#overview-of-the-process" title="Permalink to this headline">¶</a></h1>
<p>How is a configuration processed by <code class="docutils literal notranslate"><span class="pre">configpile</span></code>, for example when calling
<a class="reference internal" href="../_autosummary/configpile.config.Config.html#configpile.config.Config.from_command_line_" title="configpile.config.Config.from_command_line_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_command_line_()</span></code></a>?</p>
<ol>
<li><p>First, the configuration class, which is a <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#dataclasses.dataclass" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">dataclass()</span></code></a> inheriting from
<a class="reference internal" href="../_autosummary/configpile.config.Config.html#configpile.config.Config" title="configpile.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> is inspected. All the dataclass fields should be annotated
with a <a class="reference internal" href="../_autosummary/configpile.arg.Param.html#configpile.arg.Param" title="configpile.arg.Param"><code class="xref py py-class docutils literal notranslate"><span class="pre">Param</span></code></a> instance, see <a class="reference internal" href="params.html#concepts-params"><span class="std std-ref">Params (parameters)</span></a>. <code class="docutils literal notranslate"><span class="pre">configpile</span></code> makes
a list of triggers, for environment variables, INI files key/value pairs, and command-line
arguments.</p></li>
<li><p>For each parameter, <code class="docutils literal notranslate"><span class="pre">configpile</span></code> prepares a list of values. If the parameter does not have a
default value, the list is initially empty. If the parameter has a default value, this value
is parsed (see <a class="reference internal" href="parsers.html#concepts-parsers"><span class="std std-ref">Parsers</span></a>) and stored in the list.</p></li>
<li><p>Then, <code class="docutils literal notranslate"><span class="pre">configpile</span></code> inspects environment variables. If any of the environment variables
corresponds to a parameter, the variable content is parsed and added to the list.</p>
<p>If any environment variable points to an INI file, the file is read, and for each
parameter key present in the INI file, the corresponding value is parsed and added to the list.</p>
</li>
<li><p>After that, <code class="docutils literal notranslate"><span class="pre">configpile</span></code> processes command-line arguments. Some arguments will point to an INI
file: again, those files are parsed and the corresponding values added to the list of the
corresponding parameter. Some arguments provide parameter values directly: those values are
parsed and again added to the corresponding list.</p></li>
<li><p>At this point, <code class="docutils literal notranslate"><span class="pre">configpile</span></code> may have failed to parse some of the strings, have had problems
reading a configuration file, or some values may have failed validation
(see <a class="reference internal" href="validation.html#concepts-validation"><span class="std std-ref">Parameter and configuration validation</span></a>). All these errors are collected and reported together to the
user.</p></li>
<li><p>If everything is fine, <code class="docutils literal notranslate"><span class="pre">configpile</span></code> looks at each parameter in turn. Now, each parameter
corresponds to a list of values. The question is how to process this list to populate the
configuration with a single value. This is the job of the
<a class="reference internal" href="../_autosummary/configpile.collector.Collector.html#configpile.collector.Collector" title="configpile.collector.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collector</span></code></a>: the standard collectors provided by <code class="docutils literal notranslate"><span class="pre">configpile</span></code>
either append the values together (useful when collecting a list of files to process, for
example), or return the last value (useful when later parameter value override the values
provided previously).</p>
<p>This process can eventually fail for some or all the parameters: for example, if a collector
needs to return the last value provided, and nothing was provided at all, it will error.
All the errors are collected together, in that case, and reported to the user.</p>
</li>
<li><p>The next step is the construction of the configuration dataclass, with the computed parameter
values. After that, the validation methods of the configuration dataclass are called for the
final validation round, see <a class="reference internal" href="validation.html#concepts-validation"><span class="std std-ref">Parameter and configuration validation</span></a>. If everything works, the constructed
dataclass is returned.</p></li>
</ol>
<p>This whole process is short-circuited in a few cases.</p>
<ul class="simple">
<li><p>By default, the command-line flags <code class="docutils literal notranslate"><span class="pre">-h</span></code> and <code class="docutils literal notranslate"><span class="pre">--help</span></code> display the usage information and exit the
program using <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.exit" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exit()</span></code></a>.</p></li>
<li><p>In the future, we may support other special actions such as displaying the program version
using a <code class="docutils literal notranslate"><span class="pre">--version</span></code> flag for example.</p></li>
</ul>
<p>There are two static methods on <a class="reference internal" href="../_autosummary/configpile.config.Config.html#configpile.config.Config" title="configpile.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> that can be called to construct
a configuration.</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="../_autosummary/configpile.config.Config.html#configpile.config.Config.from_command_line_" title="configpile.config.Config.from_command_line_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_command_line_()</span></code></a> method, in case of errors, displays
usage information and exits through <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.exit" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exit()</span></code></a>.</p></li>
<li><p>The <a class="reference internal" href="../_autosummary/configpile.config.Config.html#configpile.config.Config.parse_command_line_" title="configpile.config.Config.parse_command_line_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parse_command_line_()</span></code></a> method, always returns to the caller,
and returns either a constructed configuration dataclass, a token corresponding to a special
action (such as a command to display help information or the version number), or finally
a <a class="reference internal" href="../_autosummary/configpile.userr.Err.html#configpile.userr.Err" title="configpile.userr.Err"><code class="xref py py-class docutils literal notranslate"><span class="pre">Err</span></code></a> error.</p></li>
</ul>
<div class="section" id="demonstrating-the-process">
<h2>Demonstrating the process<a class="headerlink" href="#demonstrating-the-process" title="Permalink to this headline">¶</a></h2>
<p>Here is a simple configuration class, and we will make its construction fail at several points in
the construction.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">configpile</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TestConfig</span><span class="p">(</span><span class="n">Config</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A superb program</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">#: First parameter, must be greater than the second parameter</span>
    <span class="n">a</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Param</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="n">parsers</span><span class="o">.</span><span class="n">int_parser</span><span class="p">,</span> <span class="n">short_flag_name</span><span class="o">=</span><span class="s1">&#39;-a&#39;</span><span class="p">)]</span>

    <span class="c1">#: Second parameter</span>
    <span class="n">b</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Param</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="n">parsers</span><span class="o">.</span><span class="n">int_parser</span><span class="p">,</span> <span class="n">short_flag_name</span><span class="o">=</span><span class="s1">&#39;-b&#39;</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">validate_a_greater_than_b</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Err</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Err</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter a=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2"> should be &gt; than b=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parse-errors">
<h3>Parse errors<a class="headerlink" href="#parse-errors" title="Permalink to this headline">¶</a></h3>
<p>Note that all parse errors are collected and reported. The rest of the construction process is
not done.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">TestConfig</span><span class="o">.</span><span class="n">parse_command_line_</span><span class="p">(</span><span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="s1">&#39;invalid&#39;</span><span class="p">,</span> <span class="s1">&#39;-b&#39;</span><span class="p">,</span><span class="s1">&#39;also_invalid&#39;</span><span class="p">,</span> <span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="s1">&#39;last_invalid&#39;</span><span class="p">],</span> <span class="n">env</span> <span class="o">=</span> <span class="p">{})</span>
<span class="n">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ManyErr(errs=[Err1(msg=&quot;Error &#39;invalid literal for int() with base 10: &#39;invalid&#39;&#39; in &#39;invalid&#39;&quot;, contexts=[(&#39;flag&#39;, &#39;-a&#39;), (&#39;param&#39;, &#39;a&#39;)]), Err1(msg=&quot;Error &#39;invalid literal for int() with base 10: &#39;also_invalid&#39;&#39; in &#39;also_invalid&#39;&quot;, contexts=[(&#39;flag&#39;, &#39;-b&#39;), (&#39;param&#39;, &#39;b&#39;)]), Err1(msg=&quot;Error &#39;invalid literal for int() with base 10: &#39;last_invalid&#39;&#39; in &#39;last_invalid&#39;&quot;, contexts=[(&#39;flag&#39;, &#39;-a&#39;), (&#39;param&#39;, &#39;a&#39;)])])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> • </span>In flag: -a                                                                               
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold">    • </span>In param: a                                                                            
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold">       0 </span><span style="color: #ffffff; text-decoration-color: #ffffff; background-color: #000000">Error 'invalid literal for int() with base 10: 'invalid'' in 'invalid'</span>              
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold">       1 </span><span style="color: #ffffff; text-decoration-color: #ffffff; background-color: #000000">Error 'invalid literal for int() with base 10: 'last_invalid'' in 'last_invalid'</span>    

<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> 0 </span>In flag: -b                                                                               
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold">   </span>In param: b                                                                               
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold">   </span><span style="color: #ffffff; text-decoration-color: #ffffff; background-color: #000000">Error 'invalid literal for int() with base 10: 'also_invalid'' in 'also_invalid'</span>          
</pre>
</div></div>
</div>
</div>
<div class="section" id="collection-errors">
<h3>Collection errors<a class="headerlink" href="#collection-errors" title="Permalink to this headline">¶</a></h3>
<p>Those errors happen during the collection process. Here, because of missing values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">TestConfig</span><span class="o">.</span><span class="n">parse_command_line_</span><span class="p">(</span><span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">],</span> <span class="n">env</span> <span class="o">=</span> <span class="p">{})</span>
<span class="n">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Err1(msg=&#39;Argument is required&#39;, contexts=[(&#39;param&#39;, &#39;b&#39;)])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">In param: b                                                                                  

<span style="color: #ffffff; text-decoration-color: #ffffff; background-color: #000000">Argument is required</span>                                                                         
</pre>
</div></div>
</div>
</div>
<div class="section" id="instance-level-validation-errors">
<h3>Instance-level validation errors<a class="headerlink" href="#instance-level-validation-errors" title="Permalink to this headline">¶</a></h3>
<p>Those errors are reported in a last step, and will only be shown if the previous steps were
completed successfully.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">TestConfig</span><span class="o">.</span><span class="n">parse_command_line_</span><span class="p">(</span><span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;-b&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">],</span> <span class="n">env</span> <span class="o">=</span> <span class="p">{})</span>
<span class="n">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Err1(msg=&#39;Parameter a=2 should be &gt; than b=3&#39;, contexts=[])
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Concepts</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="errors.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Error handling in <code class="docutils literal notranslate"><span class="pre">configpile</span></code></p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
        &copy; Copyright .<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>