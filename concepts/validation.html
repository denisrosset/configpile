
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parameter and configuration validation &#8212; configpile</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configurations" href="config.html" />
    <link rel="prev" title="Params (parameters)" href="params.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">configpile</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  General information
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Home page
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../tutorial/index.html">
   Tutorial
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/index.html">
     Index
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step1.html">
     Step 1: Simple calculator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step2.html">
     Step 2: Reuse defaults, short flags
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step3.html">
     Step 3: Two positional arguments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step4.html">
     Step 4: Many positional arguments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step5.html">
     Step 5: Additional features
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorial/step6.html">
     Step 6: Final calculator script
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Concepts
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="overview.html">
     Overview of the process
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="errors.html">
     Error handling in
     <code class="docutils literal notranslate">
      <span class="pre">
       configpile
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="parsers.html">
     Parsers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="params.html">
     Params (parameters)
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Parameter and configuration validation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="config.html">
     Configurations
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  API
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api.html">
   API
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.arg.html">
     arg
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.arg.Arg.html">
       Arg
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.arg.Expander.html">
       Expander
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.arg.Param.html">
       Param
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.collector.html">
     collector
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.collector.Collector.html">
       Collector
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.config.html">
     config
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.config.Config.html">
       Config
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.config.IniSection.html">
       IniSection
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.enums.html">
     enums
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.enums.Derived.html">
       Derived
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.enums.ForceCase.html">
       ForceCase
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.enums.Positional.html">
       Positional
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.enums.SpecialAction.html">
       SpecialAction
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.handlers.html">
     handlers
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLConfigParam.html">
       CLConfigParam
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLHandler.html">
       CLHandler
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLInserter.html">
       CLInserter
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLParam.html">
       CLParam
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLPos.html">
       CLPos
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLSpecialAction.html">
       CLSpecialAction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.CLStdHandler.html">
       CLStdHandler
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.KVConfigParam.html">
       KVConfigParam
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.KVHandler.html">
       KVHandler
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.handlers.KVParam.html">
       KVParam
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.parsers.html">
     parsers
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.path_parser.html">
       path_parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.int_parser.html">
       int_parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.str_parser.html">
       str_parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.stripped_str_parser.html">
       stripped_str_parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.float_parser.html">
       float_parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.ErrorMessageProvider.html">
       ErrorMessageProvider
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.Parser.html">
       Parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.parsers.Predicate.html">
       Predicate
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.processor.html">
     processor
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.processor.IniProcessor.html">
       IniProcessor
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.processor.Processor.html">
       Processor
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.processor.ProcessorFactory.html">
       ProcessorFactory
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.processor.State.html">
       State
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.userr.html">
     userr
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.collect.html">
       collect
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.collect_seq.html">
       collect_seq
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.flatMap.html">
       flatMap
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.flat_map.html">
       flat_map
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.in_context.html">
       in_context
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.map.html">
       map
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.wrap.html">
       wrap
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.Err.html">
       Err
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.Err1.html">
       Err1
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.userr.ManyErr.html">
       ManyErr
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../_autosummary/configpile.util.html">
     util
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.assert_never.html">
       assert_never
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.dict_from_multiple_keys.html">
       dict_from_multiple_keys
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.filter_ordered_dict.html">
       filter_ordered_dict
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.filter_ordered_dict_by_value_type.html">
       filter_ordered_dict_by_value_type
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.filter_sequence_by_value_type.html">
       filter_sequence_by_value_type
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.filter_types.html">
       filter_types
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.filter_types_single.html">
       filter_types_single
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../_autosummary/configpile.util.ClassDoc.html">
       ClassDoc
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#validation-during-parsing">
   Validation during parsing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#validation-during-construction">
   Validation during construction
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Parameter and configuration validation</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#validation-during-parsing">
   Validation during parsing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#validation-during-construction">
   Validation during construction
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="parameter-and-configuration-validation">
<span id="concepts-validation"></span><h1>Parameter and configuration validation<a class="headerlink" href="#parameter-and-configuration-validation" title="Permalink to this headline">¶</a></h1>
<p>The validation of a parameter value checks requirements that are not part of the parsing process
itself. For example, we may require that a numerical parameter is within a certain range.</p>
<p>There are two places where the validation may occur.</p>
<ul>
<li><p>The validation may be done right after parsing, if the parameter value can be checked on its own.
This is the recommended place to perform validation, if at all possible. The validation function
is then tacked on to the parser.</p>
<p>More interestingly, errors about this kind of validation will be reported early in the processing
along with other parse errors. This is the most user-friendly option.</p>
</li>
<li><p>If the validation is about a <em>relationship</em> between parameter values, it must be done after the
configuration has been processed and constructed. The validation function needs to be a method
in the configuration subclass.</p></li>
</ul>
<p>We demonstrate the two options in the example below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span> <span class="nn">configpile</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>


<span class="k">def</span> <span class="nf">int_is_not_negative</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TestConfig</span><span class="p">(</span><span class="n">Config</span><span class="p">):</span>

    <span class="n">a</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Param</span><span class="o">.</span><span class="n">store</span><span class="p">(</span>
        <span class="n">parsers</span><span class="o">.</span><span class="n">int_parser</span><span class="o">.</span><span class="n">validated</span><span class="p">(</span><span class="n">int_is_not_negative</span><span class="p">,</span> <span class="s2">&quot;The value cannot be negative&quot;</span><span class="p">)</span>
    <span class="p">)]</span>
    
    <span class="n">b</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Param</span><span class="o">.</span><span class="n">store</span><span class="p">(</span>
        <span class="n">parsers</span><span class="o">.</span><span class="n">int_parser</span><span class="o">.</span><span class="n">validated</span><span class="p">(</span><span class="n">int_is_not_negative</span><span class="p">,</span> <span class="s2">&quot;The value cannot be negative&quot;</span><span class="p">)</span>
        <span class="p">)]</span>

    <span class="k">def</span> <span class="nf">validate_a_is_greater_than_b</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Err</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Err</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The value a=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2"> needs to be greater than the value b=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">Input In [1],</span> in <span class="ni">&lt;cell line: 2&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="kn">from</span> <span class="nn">configpile</span> <span class="kn">import</span> <span class="o">*</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="ne">AttributeError</span>: module &#39;configpile&#39; has no attribute &#39;fun&#39;
</pre></div>
</div>
</div>
</div>
<div class="section" id="validation-during-parsing">
<h2>Validation during parsing<a class="headerlink" href="#validation-during-parsing" title="Permalink to this headline">¶</a></h2>
<p>This example has the validation during parsing fail.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">TestConfig</span><span class="o">.</span><span class="n">parse_command_line_</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;--a&quot;</span><span class="p">,</span> <span class="s2">&quot;-2&quot;</span><span class="p">,</span> <span class="s2">&quot;--b&quot;</span><span class="p">,</span> <span class="s2">&quot;-3&quot;</span><span class="p">])</span>
<span class="n">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ManyErr(errs=[Err1(msg=&#39;The value cannot be negative&#39;, contexts=[(&#39;flag&#39;, &#39;--a&#39;), (&#39;param&#39;, &#39;a&#39;)]), Err1(msg=&#39;The value cannot be negative&#39;, contexts=[(&#39;flag&#39;, &#39;--b&#39;), (&#39;param&#39;, &#39;b&#39;)])])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> 0 </span>In flag: --a                                                                              
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold">   </span>In param: a                                                                               
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold">   </span><span style="color: #ffffff; text-decoration-color: #ffffff; background-color: #000000">The value cannot be negative</span>                                                              
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> 1 </span>In flag: --b                                                                              
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold">   </span>In param: b                                                                               
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold">   </span><span style="color: #ffffff; text-decoration-color: #ffffff; background-color: #000000">The value cannot be negative</span>                                                              
</pre>
</div></div>
</div>
</div>
<div class="section" id="validation-during-construction">
<h2>Validation during construction<a class="headerlink" href="#validation-during-construction" title="Permalink to this headline">¶</a></h2>
<p>This example has the validation post-construction fail.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">TestConfig</span><span class="o">.</span><span class="n">parse_command_line_</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;--a&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;--b&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">])</span>
<span class="n">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Err1(msg=&#39;The value a=2 needs to be greater than the value b=3&#39;, contexts=[])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #ffffff; text-decoration-color: #ffffff; background-color: #000000">The value a=2 needs to be greater than the value b=3</span>                                         
</pre>
</div></div>
</div>
</div>
</div>


              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="params.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Params (parameters)</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="config.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Configurations</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
        &copy; Copyright .<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>